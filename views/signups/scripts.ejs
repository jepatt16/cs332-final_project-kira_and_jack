<script src="https://code.jquery.com/jquery-3.4.1.min.js"></script>
<script>
    function ShowMessage(data)
    {
      alert('Thanks for Signing Up!');
      window.location.replace(`/open_mics/${data.date}`)
    }

  $('#create').on('submit', function(event) {
    const form = $(this);
    event.preventDefault();
    $.ajax({method: 'post', url: '/signups', data: form.serialize()})
      .done(data => ShowMessage(data))
      .fail(error => alert(error.responseText));
  });

  $('.delete').on('click', function(event){
     event.preventDefault();
     const tr = $(this.closest('tr'));
     const id = tr.children()[2].textContent;
     $.ajax({method: 'delete', url: '/signups', data: {id: id}})
         .done(window.location.reload())
         .fail(error => alert(error.responseText));
   });

   $('.approve').on('click', function(event){
      event.preventDefault();
      const tr = $(this.closest('tr'));
      const id = tr.children()[2].textContent;
      $.ajax({method: 'post', url: '/open_mics', data: {id: id}})
          .done(window.location.reload())
          .fail(error => alert(error.responseText));
    });

</script>
