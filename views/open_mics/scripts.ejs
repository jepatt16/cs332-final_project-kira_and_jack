<script src="https://code.jquery.com/jquery-3.4.1.min.js"></script>
<script>

function ShowMessage(data)
    {
      alert('Thanks for Signing Up!');
      window.location.replace(`/open_mics/${data.date}`)
    }

  $('.remove').on('click', function(event){
     event.preventDefault();
     const id = $(this).closest('li').attr('id');
     $.ajax({method: 'put', url: `/open_mics/${id}`,data: {approved: false}})
         .done(window.location.reload())
         .fail(error => alert(error.responseText));
   });

   $('.approve').on('click', function(event){
     event.preventDefault();
     const id = $(this).closest('li').attr('id');
     $.ajax({method: 'put', url: `/open_mics/${id}`, data: {approved: true}})
         .done(window.location.reload())
         .fail(error => alert(error.responseText));
   });

   $('.delete').on('click', function(event){
     event.preventDefault();
     const id = $(this).closest('li').attr('id');
     $.ajax({method: 'delete', url: `/open_mics/${id}`})
         .done(window.location.reload())
         .fail(error => alert(error.responseText));
   });

   $('.submit').on('click', function(event) {
    const form = $(this).closest('form');
    event.preventDefault();
    $.ajax({method: 'post', url: "/open_mics", data: form.serialize()})
      .done(data => ShowMessage(data))
      .fail(error => alert(error.responseText));
  });

</script>
